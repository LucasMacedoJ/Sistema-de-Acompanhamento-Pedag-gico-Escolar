<%- include('../tela') %>

    <head>
        <link rel="stylesheet" href="/css/perfil.css">
        <link rel="stylesheet" href="/css/geral.css">
    </head>

    <h1>Meu perfil</h1>

    <div class="perfil-container">
        <br>

        <div class="foto-container">
            <% const fotoVal=usuario.avatar || usuario.foto; const fotoPath=fotoVal ?
                (String(fotoVal).trim().startsWith('/') ? String(fotoVal).trim() : (String(fotoVal).includes('uploads')
                ? ('/' + String(fotoVal).replace(/^\/+/, '' )) : ('/uploads/' + String(fotoVal).replace(/^\/+/, '' ))))
                : '/imagens/padrao.png' ; %>
                <img src="<%= fotoPath %>" alt="Foto do usuÃ¡rio" class="foto">
        </div>

        <p><strong>Nome:</strong>
            <%= usuario.nome %>
        </p>
        <p><strong>Email:</strong>
            <%= usuario.email %>
        </p>

        <form action="/usuario/perfil/foto" method="POST" enctype="multipart/form-data">
            <input type="file" name="foto" accept="image/*" required>
            <button type="submit" class="action-btn">Atualizar Foto</button>
        </form>

        <div class="botoes">
            <form action="/usuario/logout" method="post" class="logout-form">
                <button type="submit" class="action-btn">Deslogar</button>
                <button type="button" onclick="history.back()" class="action-btn">Voltar</button>
            </form>
        </div>
    </div>