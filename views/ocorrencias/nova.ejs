<%- include('../tela') %>

<h1>Cadastro de Ocorrência</h1>

<div class="container">
  <% if (erro) { %>
    <div class="alert alert-danger"><%= erro %></div>
  <% } %>

  <form action="/ocorrencias/cadastrar" method="POST" class="form-ocorrencia">
    <!-- ID do aluno (oculto) -->
    <input type="hidden" name="aluno" value="<%= alunoId %>">

    <!-- Tipo da ocorrência -->
    <div class="form-group">
      <label for="tipo">Tipo da Ocorrência:</label>
      <select name="tipo" id="tipo" required>
        <option value="GERAL">Geral</option>
        <option value="APOIA">APOIA</option>
        <option value="NEPRE">NEPRE</option>
        <option value="DISCIPLINAR">Disciplinar</option>
      </select>
    </div>

    <!-- Data de abertura -->
    <div class="form-group">
      <label for="data">Data de Abertura:</label>
      <input type="date" name="data" id="data" required>
    </div>

    <!-- Descrição -->
    <div class="form-group">
      <label for="descricao">Descrição da Ocorrência:</label>
      <textarea name="descricao" id="descricao" rows="4" required></textarea>
    </div>

    <!-- Responsável -->
    <div class="form-group">
      <label for="responsavel">Responsável pelo Registro:</label>
      <input type="text" name="responsavel" id="responsavel" placeholder="Ex: Prof. João Silva" required>
    </div>

    <!-- Encaminhamento -->
    <div class="form-group">
      <label for="encaminhamento">Encaminhamento (opcional):</label>
      <textarea name="encaminhamento" id="encaminhamento" rows="2"></textarea>
    </div>

    <!-- Resultado -->
    <div class="form-group">
      <label for="resultado">Resultado (opcional):</label>
      <textarea name="resultado" id="resultado" rows="2"></textarea>
    </div>

    <div class="form-actions">
      <button type="submit" class="btn">Cadastrar</button>
      <% if (alunoId) { %>
        <a class="btn" href="/alunos/detalhes/<%= alunoId %>">Voltar</a>
      <% } else { %>
        <a class="btn" href="/alunos/">Ver lista de alunos</a>
      <% } %>
    </div>
  </form>
</div>

<style>
  .container {
    width: 80%;
    margin: 0 auto;
    padding: 20px;
  }

  .form-group {
    margin-bottom: 15px;
  }

  label {
    display: block;
    font-weight: bold;
  }

  input, textarea, select {
    width: 100%;
    padding: 8px;
    border-radius: 6px;
    border: 1px solid #ccc;
  }

  .form-actions {
    margin-top: 20px;
    display: flex;
    gap: 10px;
  }

  .btn {
    display: inline-block;
    background: #007bff;
    color: white;
    padding: 8px 14px;
    border-radius: 6px;
    text-decoration: none;
  }

  .btn:hover {
    background: #0056b3;
  }

  .alert {
    background-color: #f8d7da;
    color: #842029;
    padding: 10px;
    border-radius: 6px;
    margin-bottom: 15px;
  }
</style>
