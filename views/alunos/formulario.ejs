<%- include('../tela') %>

  <head>
    <link rel="stylesheet" href="/css/cadastroAlunos.css">
  </head>

  <body>
    <div class="container">
      <h1>Cadastro de Aluno</h1>

      <form action="/alunos/cadastrar" method="POST" enctype="multipart/form-data">

        <!-- Nome completo -->
        <div>
          <label for="nome">Nome completo:</label>
          <input type="text" name="nome" id="nome" required placeholder="Ex: Ana Beatriz da Silva">
        </div>

        <!-- Turma -->
        <div>
          <label for="turma">Turma:</label><br>
          <select name="turma" id="turma" required>
            <option value="" disabled selected>Selecione uma turma</option>
            <% turmas.forEach(function(turma) { %>
              <option value="<%= turma._id %>">
                <%= turma.nome %>
                  <%= turma.periodo %>
              </option>
              <% }) %>
          </select>
        </div>

        <!-- Data de nascimento -->
        <div>
          <label for="dataN">Data de Nascimento:</label>
          <input type="date" name="dataN" id="dataN" required>
        </div>

        <!-- üì∏ Foto -->
        <div>
          <label for="foto">Foto do Aluno:</label>
          <input type="file" name="foto" id="foto" accept="image/*">
        </div>

        <!-- üß† Necessidades Especiais (inputs m√∫ltiplos) -->
        <div>
          <label>Necessidades Especiais:</label><br>
          <div id="necessidadeE-container">
            <input type="text" name="necessidadeE[]" placeholder="Digite uma necessidade especial">
          </div>
          <button type="button" onclick="adicionarInput('necessidadeE-container')">Adicionar</button>
        </div>

        <!-- ‚ù§Ô∏è Problemas de Sa√∫de (inputs m√∫ltiplos) -->
        <div>
          <label>Problemas de Sa√∫de:</label><br>
          <div id="problemaSaude-container">
            <input type="text" name="problemaSaude[]" placeholder="Digite um problema de sa√∫de">
          </div>
          <button type="button" onclick="adicionarInput('problemaSaude-container')">Adicionar</button>
        </div>

        <!-- ‚öôÔ∏è Dificuldades Disciplinares (inputs m√∫ltiplos) -->
        <div>
          <label>Dificuldades Disciplinares:</label><br>
          <div id="disciplinaD-container">
            <input type="text" name="disciplinaD[]" placeholder="Digite uma dificuldade disciplinar">
          </div>
          <button type="button" onclick="adicionarInput('disciplinaD-container')">Adicionar</button>
        </div>

        <!-- Transfer√™ncia -->
        <div>
          <label for="transferenciaOnde">Transfer√™ncia de onde:</label>
          <input type="text" name="transferenciaOnde" id="transferenciaOnde" placeholder="Nome da escola anterior">
        </div>

        <div>
          <label for="transferenciaD">Descri√ß√£o da transfer√™ncia:</label>
          <input type="text" name="transferenciaD" id="transferenciaD" placeholder="Motivo ou detalhes">
        </div>

        <!-- Respons√°vel -->
        <div>
          <label for="responsavelNome">Nome do Respons√°vel:</label>
          <input type="text" name="responsavelNome" id="responsavelNome" required>
        </div>

        <div>
          <label for="responsavelContato">Contato do Respons√°vel:</label>
          <input type="text" name="responsavelContato" id="responsavelContato" required>
        </div>

        <!-- Segundo Professor -->
        <div>
          <label for="segundoProfessor">Segundo Professor:</label>
          <input type="checkbox" name="segundoProfessor" id="segundoProfessor">
        </div>

        <div>
          <label for="segundoProfessorNome">Nome do Segundo Professor:</label>
          <input type="text" name="segundoProfessorNome" id="segundoProfessorNome" placeholder="Se houver">
        </div>

        <!-- Observa√ß√£o -->
        <div>
          <label for="observacao">Observa√ß√£o:</label><br>
          <textarea class="ctexto" name="observacao" id="observacao" rows="4" cols="50"
            placeholder="Digite observa√ß√µes adicionais"></textarea>
        </div>

        <!-- Bot√µes -->
        <div class="botoes">
          <button type="submit">Cadastrar</button>
          <a class="btn" href="/alunos/">Voltar para a lista de alunos</a>
        </div>
      </form>
    </div>

    <script src="https://unpkg.com/vanilla-masker/build/vanilla-masker.min.js"></script>
    <script>
      // M√°scara de telefone
      const telInput = document.getElementById('responsavelContato');
      if (telInput) VMasker(telInput).maskPattern('(99) 99999-9999');

      // Fun√ß√£o para adicionar novos inputs dinamicamente
      function adicionarInput(containerId) {
        const container = document.getElementById(containerId);
        const input = document.createElement('input');
        input.type = 'text';
        input.name = containerId.replace('-container', '[]');
        input.placeholder = 'Digite um valor';
        container.appendChild(input);
      }
    </script>
  </body>