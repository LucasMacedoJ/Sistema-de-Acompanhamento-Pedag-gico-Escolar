<%- include('../tela') %>

  <head>
    <link rel="stylesheet" href="/css/cadastroAlunos.css">
  </head>

  <body>
    <div class="container">
      <h1>Cadastro de Aluno</h1>

      <form action="/alunos/cadastrar" method="POST" enctype="multipart/form-data">
        <!-- üßæ Nome completo -->
        <div>
          <label for="nome">Nome completo:</label>
          <input type="text" name="nome" id="nome" required placeholder="Ex: Ana Beatriz da Silva">
        </div>

        <!-- üè´ Turma -->
        <div>
          <label for="turma">Turma:</label><br>
          <select name="turma" id="turma" required>
            <option value="" disabled selected>Selecione uma turma</option>
            <% turmas.forEach(function(turma) { %>
              <option value="<%= turma._id %>">
                <%= turma.nome %> - <%= turma.periodo %>
              </option>
              <% }) %>
          </select>
        </div>

        <!-- üéÇ Data de Nascimento -->
        <div>
          <label for="dataN">Data de Nascimento:</label>
          <input type="date" name="dataN" id="dataN" max="<%= new Date().toISOString().split('T')[0] %>" required>
        </div>
        <!-- üì∏ Foto -->
        <div>
          <label for="foto">Foto do Aluno:</label>
          <input type="file" name="foto" id="foto" accept="image/*">
        </div>

        <!-- üß† Necessidades Especiais -->
        <div>
          <label>Necessidades Especiais:</label><br>
          <div id="necessidadeE-container">
            <input type="text" name="necessidadeE[]" placeholder="Necessidade especial">
          </div>
          <button type="button"
            onclick="adicionarInput('necessidadeE-container', 'Necessidade especial')">Adicionar</button>
        </div>

        <!-- ‚ù§Ô∏è Problemas de Sa√∫de -->
        <div>
          <label>Problemas de Sa√∫de:</label><br>
          <div id="problemaSaude-container">
            <input type="text" name="problemaSaude[]" placeholder="Problema de sa√∫de">
          </div>
          <button type="button"
            onclick="adicionarInput('problemaSaude-container', 'Problema de sa√∫de')">Adicionar</button>
        </div>

        <!-- ‚öôÔ∏è Dificuldades Disciplinares -->
        <div>
          <label>Dificuldades Disciplinares:</label><br>
          <div id="disciplinaD-container">
            <input type="text" name="disciplinaD[]" placeholder="Dificuldade disciplinar">
          </div>
          <button type="button"
            onclick="adicionarInput('disciplinaD-container', 'Dificuldade disciplinar')">Adicionar</button>
        </div>

        <!-- üè´ Transfer√™ncia -->
        <div>
          <label for="transferenciaOnde">Transfer√™ncia de onde:</label>
          <input type="text" name="transferenciaOnde" id="transferenciaOnde" placeholder="Nome da escola anterior">
        </div>

        <div>
          <label for="transferenciaD">Descri√ß√£o da transfer√™ncia:</label>
          <input type="text" name="transferenciaD" id="transferenciaD" placeholder="Motivo ou detalhes">
        </div>

        <!-- üë®‚Äçüë©‚Äçüëß Respons√°vel -->
        <div>
          <label for="responsavelNome">Nome do Respons√°vel:</label>
          <input type="text" name="responsavelNome" id="responsavelNome" required placeholder="Ex: Maria Oliveira">
        </div>

        <div>
          <label for="responsavelContato">Contato do Respons√°vel:</label>
          <input type="text" name="responsavelContato" id="responsavelContato" required placeholder="(99) 99999-9999">
        </div>

        <!-- üßë‚Äçüè´ Segundo Professor -->
        <div>
          <label>
            <input type="checkbox" name="segundoProfessor" id="segundoProfessor">
            Segundo Professor
          </label>
        </div>

        <div>
          <label for="segundoProfessorNome">Nome do Segundo Professor:</label>
          <input type="text" name="segundoProfessorNome" id="segundoProfessorNome" placeholder="Se houver">
        </div>

        <!-- üóíÔ∏è Observa√ß√£o -->
        <div>
          <label for="observacao">Observa√ß√£o:</label><br>
          <textarea class="ctexto" name="observacao" id="observacao" rows="4" cols="50"
            placeholder="Digite observa√ß√µes adicionais"></textarea>
        </div>

        <!-- üß≠ Bot√µes -->
        <div class="botoes">
          <button type="submit">Cadastrar</button>
          <a class="btn" href="/alunos/">Voltar para a lista de alunos</a>
        </div>
      </form>
    </div>

    <script src="https://unpkg.com/vanilla-masker/build/vanilla-masker.min.js"></script>
    <script>
      // üì± M√°scara de telefone
      const telInput = document.getElementById('responsavelContato');
      if (telInput) VMasker(telInput).maskPattern('(99) 99999-9999');

      // ‚ûï Adicionar novos campos din√¢micos
      function adicionarInput(containerId, placeholder) {
        const container = document.getElementById(containerId);
        const input = document.createElement('input');
        input.type = 'text';
        input.name = containerId.replace('-container', '[]');
        input.placeholder = placeholder;
        container.appendChild(input);
      }
    </script>
  </body>